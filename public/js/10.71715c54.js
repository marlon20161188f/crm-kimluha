(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"0d3e":function(e,t,s){"use strict";s.r(t);var a={name:"NotificationForm",data:()=>({load:!1,loading:!1,loadingSubmit:!1,resource:"api/notification",title:"",errors:{},form:{},states:[]}),created(){this.initForm(),this.initTables()},mounted(){this.load=!0},methods:{initForm(){this.errors={},this.form={id:null,state_id:null,subject:null,message:null,file:null}},initTables(){this.$axios.get(`/${this.resource}/tables`).then((e=>{this.states=e.data.states}))},async sendMail(){if(_.isNull(this.form.state_id))return this.$q.notify({message:"Seleccione un estado",icon:"fas fa-times",color:"red"}),!1;if(_.isNull(this.form.subject)||""===this.form.subject)return this.$q.notify({message:"El campo asunto es requerido",icon:"fas fa-times",color:"red"}),!1;if(_.isNull(this.form.message)||""===this.form.message)return this.$q.notify({message:"El campo mensaje es requerido",icon:"fas fa-times",color:"red"}),!1;this.loadingSubmit=!0,this.errors={};let e=new FormData;e.append("id",this.form.id),e.append("state_id",this.form.state_id),e.append("subject",this.form.subject),e.append("message",this.form.message),e.append("file",this.form.file),await this.$axios.post(`/${this.resource}/send_mail`,e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{e.data.success?(this.$q.notify({message:e.data.message,icon:"fas fa-check",color:"positive"}),this.initForm()):this.$q.notify({message:e.data.message,icon:"fas fa-times",color:"red"})})).catch((e=>{this.errors=e})),this.loadingSubmit=!1}}},i=s("2877"),o=s("f09f"),r=s("a370"),l=s("7d53"),n=s("0016"),c=s("9c40"),d=s("eebe"),m=s.n(d),f=Object(i.a)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.load?s("div",{staticClass:"content-index"},[s("div",{staticClass:"row q-col-gutter-md"},[s("div",{staticClass:"col-12"},[s("q-card",[s("q-card-section",{staticClass:"q-pa-lg"},[s("div",{staticClass:"row q-col-gutter-md"},[s("div",{staticClass:"col-24 col-md-12"},[s("x-select",{attrs:{label:"Estado",options:e.states,error:e.errors.state_id},model:{value:e.form.state_id,callback:function(t){e.$set(e.form,"state_id",t)},expression:"form.state_id"}})],1),s("div",{staticClass:"col-24"},[s("x-input",{attrs:{label:"Asunto email",autogrow:"",error:e.errors.subject},model:{value:e.form.subject,callback:function(t){e.$set(e.form,"subject",t)},expression:"form.subject"}})],1),s("div",{staticClass:"col-24"},[s("x-input",{attrs:{label:"Mensaje email",autogrow:"",error:e.errors.message},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}})],1),s("div",{staticClass:"col-24"},[s("q-file",{attrs:{outlined:"",dense:"",label:"Archivo",error:e.errors.file},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{size:"xs",name:"fas fa-paperclip"}})]},proxy:!0},{key:"after",fn:function(){},proxy:!0}],null,!1,74072878),model:{value:e.form.file,callback:function(t){e.$set(e.form,"file",t)},expression:"form.file"}})],1)]),s("div",{staticClass:"row q-col-gutter-md",staticStyle:{"margin-top":"18px"}},[s("div",{staticClass:"col-24 text-right"},[s("q-btn",{attrs:{unelevated:"",color:"blue",disable:!e.form.state_id,loading:e.loadingSubmit},on:{click:function(t){return t.preventDefault(),e.sendMail.apply(null,arguments)}}},[e._v("ENVIAR\n              ")])],1)])])],1)],1)])]):e._e()}),[],!1,null,null,null);t.default=f.exports,m()(f,"components",{QCard:o.a,QCardSection:r.a,QFile:l.a,QIcon:n.a,QBtn:c.a})}}]);
